# 🤖 PR Agent: AI-Powered Press Release Assistant

**PR Agent** は、広報担当者のプレスリリース作成業務を支援する AI アシスタントツールです。  
単なる文章生成に留まらず、生成AI特有の「推論待ち時間」による業務中断（コンテキストスイッチ）を防ぐための **非同期UXアーキテクチャ** を採用し、ユーザーの生産性を最大化することに特化しています。

---

## 📖 プロジェクト概要 (Overview)

ハッカソンのチーム開発にて制作。

「AIツールは便利だが、レスポンス待ちの数十秒がストレスになり、思考が途切れる」という現場の声を解決するため、  
**「待ち時間をゼロにする（待たずに作業を続けられる）」体験の実現** を技術的な最重要テーマに掲げました。

### 解決した課題

- **AIのレイテンシ問題**: LLMの応答待ち（平均20〜30秒）によるUXの低下
- **編集と分析の競合**: 分析中にテキストを編集した際のデータ整合性の欠如
- **広報業務の属人化**: 効果的なフック（切り口）や構成案作成のナレッジ不足

---

## 🛠 使用技術 (Tech Stack)

フロントエンドとバックエンドを疎結合にし、UXの柔軟性と開発効率を両立させる構成を採用しました。

| Category | Technology | Usage |
|---|---|---|
| Frontend | React, TypeScript | UI構築, ロジック実装 |
| Build Tool | Vite | 高速なHMR開発環境 |
| PWA / Async | Service Worker, Notification API | バックグラウンド通知, UX制御 |
| Backend | Ruby on Rails (API Mode) | ビジネスロジック, API提供 |
| Infrastructure | Docker, Kamal | コンテナデプロイ |
| AI | OpenAI API | 自然言語処理, 校正, アイデア出し |

---

## 🚀 技術的なこだわり・アーキテクチャ (Engineering Challenges)

本プロジェクトでは、特に **フロントエンドにおける「非同期処理のUX設計」と「状態管理」** に注力しました。

### 1. Service Workerを活用した非同期UXとRe-engagement

生成AIの推論処理をバックグラウンドへ逃がし、ユーザーをブラウザに縛り付けないUXを設計しました。

#### Service Worker Bridge パターン

単なる通知表示にとどまらず、Service Worker とクライアント（React）間で **メッセージングチャネル（SWMessageBridge）** を確立。

- ユーザーがデスクトップ通知をクリックした際、アプリケーション内の「生成された回答箇所」へ即座に誘導
- `scrollIntoView` による **ディープリンク的な挙動** を実装し、シームレスな作業復帰を実現

#### 堅牢な権限管理

Notification API の権限状態（`granted`, `denied`, `default`）を厳密に判定し、  
ユーザー体験を阻害しない適切なタイミングで権限リクエストを行う **フォールバック設計** を実装しています。

---

### 2. スナップショットによるノンブロッキング編集 (Optimistic UI)

「AIの回答を待っている間も、思考を止めずに執筆を続けたい」というニーズに応えるため、  
React の状態管理において **責務の分離** を行いました。

#### State Segregation（状態の分離）

- ユーザーが編集中の **Editing State**
- AIに送信した瞬間の **Snapshot State**

を分離して管理する設計を採用。

#### データ整合性の担保

「アドバイス」ボタン押下時に現在のテキスト状態を **スナップショットとして固定** し、非同期で処理を開始します。

これにより、

- ユーザーは AI の応答を待たずに最新テキストを編集し続けられる
- 後から返ってきたAIフィードバックが最新の編集内容と競合（Conflict）しない

という **安全なOptimistic UI** を実現しました。

---

### 3. デモにおける再現性とリスクヘッジ

ハッカソンのプレゼンテーションで、実機デモの通信エラーや操作ミスによる機会損失を排除するため、  
**再現性を担保する戦略** を採用しました。

- 実際の操作ログに基づいたデモ動画を作成
- 通信遅延などの「間」を編集で排除し、理想的なUXフローを確実に伝える

---

## 💻 開発プロセスとチームマネジメント

### User Centricな意思決定

開発途中、メンバー間で機能実装の優先順位について意見が割れる場面がありましたが、  
「ユーザー（広報担当）にとってのメリットは何か？」という原点に立ち返るファシリテーションを実施。

技術的なエゴではなく、**ユーザー価値を軸に仕様を決定** しました。

### ドキュメント駆動開発

API仕様の認識齟齬を防ぐため、インターフェース定義やタスク状況をドキュメント化し、  
開発の手戻りを最小限に抑えました。

---

## 🙋‍♂️ 自分の役割・貢献 (My Contribution)

**Role: Frontend Lead / UX Architect**

- **フロントエンド実装**: React/TypeScript による SPA 構築、カスタムフックでのロジック分離
- **PWA/Notification実装**: Service Worker を用いた通知システムと、React コンポーネントとの連携実装
- **API連携**: バックエンド（Rails）との非同期通信周りの設計（Axios/SWR）

---

## 🔧 セットアップ (Setup)

### Prerequisites

- Node.js v18+
- Docker / Docker Compose

### Installation

#### 1) Clone the repository

```bash
git clone https://github.com/your-username/pr-agent.git
cd pr-agent
